import{_ as s,o as n,c as a,V as l}from"./chunks/framework.6038b03e.js";const p="/vitepress/assets/error.65a647d7.png",o="/vitepress/assets/error2.35b3bc6b.png",t="/vitepress/assets/right.5acf3522.png",e="/vitepress/assets/build-MP-WEIXIN.c5f832e6.png",c="/vitepress/assets/build-MP-WEIXIN2.1524d67d.png",r="/vitepress/assets/build-MP-WEIXIN3.84159e4d.png",y="/vitepress/assets/build-MP-WEIXIN4.11d644ce.png",F="/vitepress/assets/build-MP-WEIXIN5.9838bd53.png",D="/vitepress/assets/build-MP-WEIXIN6.24dd970a.png",i="/vitepress/assets/build-MP-WEIXIN7.b2fa4090.png",C="/vitepress/assets/build-MP-WEIXIN8.4e5e6827.png",v=JSON.parse('{"title":"uniapp","description":"","frontmatter":{},"headers":[],"relativePath":"frontEnd/uniapp.md","lastUpdated":1687244324000}'),A={name:"frontEnd/uniapp.md"},u=l(`<h1 id="uniapp" tabindex="-1"><a href="https://uniapp.dcloud.net.cn/" target="_blank" rel="noreferrer">uniapp</a> <a class="header-anchor" href="#uniapp" aria-label="Permalink to &quot;[uniapp](https://uniapp.dcloud.net.cn/)&quot;">​</a></h1><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><blockquote><p><code>uni-app</code> 是一个使用 <a href="https://vuejs.org/" target="_blank" rel="noreferrer">Vue.js</a> 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web（响应式）、以及各种小程序（微信/支付宝/百度/头条/飞书/QQ/快手/钉钉/淘宝）、快应用等多个平台。</p></blockquote><blockquote><p><code>uni-app</code>一套代码，运行到多个平台</p></blockquote><p><strong>一个 uni-app 工程，就是一个 Vue 项目</strong></p><h2 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h2><blockquote><p><a href="https://uniapp.dcloud.net.cn/tutorial/project.html" target="_blank" rel="noreferrer">https://uniapp.dcloud.net.cn/tutorial/project.html</a></p></blockquote><p>一个uni-app工程，默认包含如下目录及文件：</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">┌─</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">hbuilderx</span><span style="color:#A6ACCD;">		   是开发该项目使用的工具HBuilderX的开发配置目录，一般不需要手工修改其内容。有了该目录别人在导入项目的时候，会默认使用你的开发工具配置信息。因为每个人使用开发工具的习惯不同，所以该目录一般不上传到版本管理仓库。</span></span>
<span class="line"><span style="color:#A6ACCD;">│─uniCloud              云空间目录，阿里云为uniCloud-aliyun</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">腾讯云为uniCloud-tcb</span></span>
<span class="line"><span style="color:#A6ACCD;">│─components            符合vue组件规范的uni-app组件目录</span></span>
<span class="line"><span style="color:#A6ACCD;">│  └─</span><span style="color:#FFCB6B;">comp-a</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">vue</span><span style="color:#A6ACCD;">         可复用的a组件</span></span>
<span class="line"><span style="color:#A6ACCD;">├─utssdk                存放uts文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├─pages                 业务页面文件存放的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">│  ├─index</span></span>
<span class="line"><span style="color:#A6ACCD;">│  │  └─index</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">vue</span><span style="color:#A6ACCD;">       index页面</span></span>
<span class="line"><span style="color:#A6ACCD;">│  └─list</span></span>
<span class="line"><span style="color:#A6ACCD;">│     └─list</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">vue</span><span style="color:#A6ACCD;">        list页面</span></span>
<span class="line"><span style="color:#A6ACCD;">├─static                存放应用引用的本地静态资源（如图片、视频等）的目录，注意：静态资源只能存放于此</span></span>
<span class="line"><span style="color:#A6ACCD;">├─uni_modules           存放</span><span style="color:#89DDFF;">[</span><span style="color:#C792EA;">uni_module</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">(/uni_modules)。</span></span>
<span class="line"><span style="color:#A6ACCD;">├─platforms             存放各平台专用页面的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">├─nativeplugins         App原生语言插件</span></span>
<span class="line"><span style="color:#A6ACCD;">├─nativeResources       App端原生资源目录</span></span>
<span class="line"><span style="color:#A6ACCD;">│  └─android            Android原生资源目录</span></span>
<span class="line"><span style="color:#A6ACCD;">├─hybrid                App端存放本地html文件的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">├─wxcomponents          存放小程序组件的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">├─unpackage             非工程代码，一般存放运行或发行的编译结果</span></span>
<span class="line"><span style="color:#A6ACCD;">├─AndroidManifest</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">xml</span><span style="color:#A6ACCD;">   Android原生应用清单文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├─</span><span style="color:#FFCB6B;">main</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">js</span><span style="color:#A6ACCD;">               Vue初始化入口文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├─App</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">vue</span><span style="color:#A6ACCD;">               应用配置，用来配置App全局样式以及监听 应用生命周期</span></span>
<span class="line"><span style="color:#A6ACCD;">├─manifest</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">json</span><span style="color:#A6ACCD;">         配置应用名称、appid、logo、版本等打包信息</span></span>
<span class="line"><span style="color:#A6ACCD;">├─pages</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">json</span><span style="color:#A6ACCD;">            配置页面路由、导航条、选项卡等页面类信息</span></span>
<span class="line"><span style="color:#A6ACCD;">└─uni</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">scss</span><span style="color:#A6ACCD;">              这里是uni-app内置的常用样式变量</span></span></code></pre></div><h2 id="uniapp项目规范" tabindex="-1">uniapp项目规范 <a class="header-anchor" href="#uniapp项目规范" aria-label="Permalink to &quot;uniapp项目规范&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1.</span><span style="color:#A6ACCD;"> font</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">20px</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">margin</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">padding</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">必须使用偶数，不能使用奇数</span></span>
<span class="line"><span style="color:#F78C6C;">2.</span><span style="color:#A6ACCD;"> vue中定义全局方法必须 方法名称必须义$开头 $store</span></span>
<span class="line"><span style="color:#F78C6C;">3.</span><span style="color:#A6ACCD;"> 全部使用单引号</span></span>
<span class="line"><span style="color:#F78C6C;">4.</span><span style="color:#A6ACCD;"> 小程序 css 中 background 背景图不支持本地路径。解决办法改为网络路径或 base64。</span></span>
<span class="line"><span style="color:#F78C6C;">5.</span></span></code></pre></div><blockquote><ul><li>其实程序员写的代码都大同小异，开发的时候都是有代码规范的，这样等后面项目需要维护起来的时候就简单多了，易维护</li><li>微信小程序中尽量减少animation的使用（大佬给我讲的），会造成卡顿之内的问题</li></ul></blockquote><h2 id="uniapp请求封装" tabindex="-1">uniapp请求封装 <a class="header-anchor" href="#uniapp请求封装" aria-label="Permalink to &quot;uniapp请求封装&quot;">​</a></h2><h3 id="目录结构-根目录开始" tabindex="-1">目录结构（根目录开始） <a class="header-anchor" href="#目录结构-根目录开始" aria-label="Permalink to &quot;目录结构（根目录开始）&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">┣━━━</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">api				//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">所有请求</span></span>
<span class="line"><span style="color:#FFCB6B;">┃</span><span style="color:#A6ACCD;">	  </span><span style="color:#C3E88D;">┣━━━</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">user.js</span><span style="color:#A6ACCD;">    	</span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户请求api</span></span>
<span class="line"><span style="color:#FFCB6B;">┣━━━</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">utils				//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">全局公共方法</span></span>
<span class="line"><span style="color:#FFCB6B;">┃</span><span style="color:#A6ACCD;">	  </span><span style="color:#C3E88D;">┣━━━</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">env.js		//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">公共参数</span></span>
<span class="line"><span style="color:#FFCB6B;">┃</span><span style="color:#A6ACCD;">	  </span><span style="color:#C3E88D;">┣━━━</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">request.js</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">网络请求中间件</span></span></code></pre></div><h3 id="utils-env-js-作为公共参数-像请求地址什么的" tabindex="-1"><strong>utils/env.js</strong>(作为公共参数，像请求地址什么的) <a class="header-anchor" href="#utils-env-js-作为公共参数-像请求地址什么的" aria-label="Permalink to &quot;**utils/env.js**(作为公共参数，像请求地址什么的)&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * 公共参数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 后台api服务器基础路径</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> baseUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 开发环境</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NODE_ENV </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:3000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.codeman.ink</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * 	appid : 		小程序appid</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *  baseUrl : 		服务端域名</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 变量可自行添加修改</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//存放变量的容器</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">appid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">****</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	baseUrl</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="utils-request-js" tabindex="-1"><strong>utils/request.js</strong> <a class="header-anchor" href="#utils-request-js" aria-label="Permalink to &quot;**utils/request.js**&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * 对uni.request进行二次封装</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> env </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./env.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#89DDFF;">}\${</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getStorageSync</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 判断本地是否存在token， 如果存在则带上请求头</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">header</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">content-type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">Authorization</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Bearer </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">token </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">		</span><span style="color:#676E95;font-style:italic;">// 这里是token（可自行修改）</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 请求方法</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">加载中...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		icon</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loading</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		mask</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// resolve是返回成功数据，reject返回错误数据</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 请求成功</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">success</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// 如果请求回来的状态码不是200则执行一下操作</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;font-style:italic;">// 非成功状态码弹窗</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">					title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">}\`</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">					icon</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">					duration</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2000</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;font-style:italic;">// 登录失效</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">403</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">					</span><span style="color:#676E95;font-style:italic;">// 清除本地token</span></span>
<span class="line"><span style="color:#F07178;">					</span><span style="color:#82AAFF;">removeToken</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">					</span><span style="color:#676E95;font-style:italic;">// 关闭所有页面返回到登录页</span></span>
<span class="line"><span style="color:#F07178;">					</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reLaunch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">						url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/pages/login/login</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">					</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;font-style:italic;">// 返回错误信息</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hideToast</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;font-style:italic;">// 请求回来的状态码为200则返回数据</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 请求失败</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fail</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// 请求失败弹窗</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">服务器错误，请稍后重试!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">				icon</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">				duration</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2000</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">// reject(err)</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 发请求（上面是配置选项）</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> request</span></span></code></pre></div><h3 id="api-user-js" tabindex="-1"><strong>api/user.js</strong> <a class="header-anchor" href="#api-user-js" aria-label="Permalink to &quot;**api/user.js**&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> request </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/request.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 获取首页轮播图</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> getBanner </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">request</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/banner</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">type</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="页面中调用" tabindex="-1">页面中调用 <a class="header-anchor" href="#页面中调用" aria-label="Permalink to &quot;页面中调用&quot;">​</a></h3><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">u-button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">handleBanner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">获取banner数据</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">u-button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            	bannerList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> []</span></span>
<span class="line"><span style="color:#F07178;">        	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// 获取轮播图</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">handleBanner</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getBanner</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">bannerList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">banners</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pic</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="滚动穿透" tabindex="-1">滚动穿透 <a class="header-anchor" href="#滚动穿透" aria-label="Permalink to &quot;滚动穿透&quot;">​</a></h2><ul><li>弹窗遮罩显示时，底层页面仍可滚动。给遮罩最外层 view 增加事件 <code>@touchmove.stop.prevent</code></li></ul><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pop-box</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">touchmove</span><span style="color:#A6ACCD;">.stop.</span><span style="color:#C792EA;">prevent</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="判断当前运行环境-h5-app" tabindex="-1">判断当前运行环境（H5 App） <a class="header-anchor" href="#判断当前运行环境-h5-app" aria-label="Permalink to &quot;判断当前运行环境（H5  App）&quot;">​</a></h2><blockquote><p><code>uniapp</code>可通过<code>p<wbr>rocess.env.NODE_ENV</code>判断当前环境是开发环境还是生产环境，一般用于连接测试服务器或生产服务器的动态切换。</p><p>在HBuilderX中，点击【运行】编译出来的代码是开发环境，点击【发行】编译出来的代码是生产环境</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NODE_ENV </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">开发环境</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">生产环境</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="微信小程序判断当前运行环境" tabindex="-1">微信小程序判断当前运行环境 <a class="header-anchor" href="#微信小程序判断当前运行环境" aria-label="Permalink to &quot;微信小程序判断当前运行环境&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 微信小程序</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> miniProgram </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAccountInfoSync</span><span style="color:#A6ACCD;">()		</span><span style="color:#676E95;font-style:italic;">// 获取当前帐号信息</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (miniProgram</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">envVersion </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">develop</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">	</span><span style="color:#676E95;font-style:italic;">// 开发环境</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">开发环境~</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:3000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (miniProgram</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">envVersion </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">trial</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">	  </span><span style="color:#676E95;font-style:italic;">// 体验环境</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">体验环境~</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.codeman.ink</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">		</span><span style="color:#676E95;font-style:italic;">// 正式环境</span></span>
<span class="line"><span style="color:#F07178;">		title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">正式环境~</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.codeman.ink</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span></code></pre></div><h2 id="用户截屏事件api" tabindex="-1">用户截屏事件api <a class="header-anchor" href="#用户截屏事件api" aria-label="Permalink to &quot;用户截屏事件api&quot;">​</a></h2><blockquote><p>​ <a href="https://uniapp.dcloud.net.cn/api/system/capture-screen.html" target="_blank" rel="noreferrer">https://uniapp.dcloud.net.cn/api/system/capture-screen.html</a></p></blockquote><blockquote><p>必须先让该方法调用一次，后面才会触发截屏里的回调函数</p></blockquote><p><strong>例如</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 方法不管在哪调用的，只有调用了才能在当前页面执行</span></span>
<span class="line"><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onUserCaptureScreen</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户截屏了</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="设置屏幕亮度api" tabindex="-1">设置屏幕亮度api <a class="header-anchor" href="#设置屏幕亮度api" aria-label="Permalink to &quot;设置屏幕亮度api&quot;">​</a></h2><blockquote><p><a href="https://uniapp.dcloud.net.cn/api/system/brightness.html" target="_blank" rel="noreferrer">https://uniapp.dcloud.net.cn/api/system/brightness.html</a></p></blockquote><blockquote><p>设置屏幕亮度中有一个bug，如果用户的手机是自动调节亮度的话，下次进来就生效了，再也不会触发设置亮度函数</p></blockquote><h2 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h2><blockquote><p><a href="https://uniapp.dcloud.net.cn/tutorial/performance.html" target="_blank" rel="noreferrer">https://uniapp.dcloud.net.cn/tutorial/performance.html</a></p></blockquote><h2 id="报错" tabindex="-1">报错 <a class="header-anchor" href="#报错" aria-label="Permalink to &quot;报错&quot;">​</a></h2><ol><li><p>项目开发完毕，点击发行，控制台报错了？</p><p><img src="`+p+'" alt=""></p></li></ol><p><strong>uniapp小程序发布的时候报错，如下：</strong></p><p><img src="'+o+'" alt=""></p><ol><li>解决方法： <ul><li>产生这个报错的原因是可能你项目从之前的移植过来的，然后替换了微信小程序的appid，但是HbuliderX里面没有manifest.json的没有重新获取，替换成当前小程序项目的appid之后，重新获取一下就好了</li></ul></li></ol><p><img src="'+t+'" alt=""></p><h2 id="打包微信小程序" tabindex="-1">打包微信小程序 <a class="header-anchor" href="#打包微信小程序" aria-label="Permalink to &quot;打包微信小程序&quot;">​</a></h2><h3 id="_1-发行" tabindex="-1">1. 发行 <a class="header-anchor" href="#_1-发行" aria-label="Permalink to &quot;1. 发行&quot;">​</a></h3><p><img src="'+e+'" alt=""></p><h3 id="_2-填写相关信息" tabindex="-1">2. 填写相关信息 <a class="header-anchor" href="#_2-填写相关信息" aria-label="Permalink to &quot;2. 填写相关信息&quot;">​</a></h3><p><img src="'+c+'" alt=""></p><h3 id="_3-发行" tabindex="-1">3. 发行 <a class="header-anchor" href="#_3-发行" aria-label="Permalink to &quot;3. 发行&quot;">​</a></h3><p><strong>注意：会自动打开微信开发者工具启动微信小程序项目</strong></p><p><img src="'+r+'" alt=""></p><h3 id="_4-上传" tabindex="-1">4. 上传 <a class="header-anchor" href="#_4-上传" aria-label="Permalink to &quot;4. 上传&quot;">​</a></h3><p><img src="'+y+'" alt=""></p><p><img src="'+F+'" alt=""></p><p><img src="'+D+'" alt=""></p><p><img src="'+i+'" alt=""></p><h3 id="_5-提交审核-完毕" tabindex="-1">5. 提交审核（完毕） <a class="header-anchor" href="#_5-提交审核-完毕" aria-label="Permalink to &quot;5. 提交审核（完毕）&quot;">​</a></h3><blockquote><h4 id="微信公众平台-https-mp-weixin-qq-com" tabindex="-1">微信公众平台：<a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/</a> <a class="header-anchor" href="#微信公众平台-https-mp-weixin-qq-com" aria-label="Permalink to &quot;微信公众平台：https://mp.weixin.qq.com/&quot;">​</a></h4></blockquote><p><img src="'+C+'" alt=""></p><h2 id="打包android" tabindex="-1">打包Android <a class="header-anchor" href="#打包android" aria-label="Permalink to &quot;打包Android&quot;">​</a></h2>',64),d=[u];function h(f,b,m,q,g,E){return n(),a("div",null,d)}const _=s(A,[["render",h]]);export{v as __pageData,_ as default};
